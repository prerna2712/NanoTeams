(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(e,n,t){e.exports=t(94)},57:function(e,n,t){},85:function(e,n){},92:function(e,n,t){},94:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(46),o=t.n(a),i=(t(57),t(51)),u=t(2),l=t(96),s=function(e){return c.a.createElement("button",{onClick:function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}},"Create Room")},d=t(21),f=t(28),m=t(7),b=t(9);m.b.add(b.c,b.d,b.a,b.e,b.b,b.f);var h,p,v=t(47),E=t.n(v),g=t(29),j=t(20),O=(t(90),g.a.div(h||(h=Object(f.a)(["\n  position: fixed;\n  background: #000000;\n  width: 100vw;\n  height: 93vh;\n"])))),k=g.a.video(p||(p=Object(f.a)(["\n  border-radius: 10px;\n  width: 100%;\n  overflow: hidden;\n  background: #000000;\n"]))),w=function(e){var n,t,a=Object(r.useState)(!1),o=Object(d.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(!0),s=Object(d.a)(l,2),f=s[0],m=s[1],b=Object(r.useState)(),h=Object(d.a)(b,2),p=h[0],v=h[1],g=Object(r.useRef)(),w=Object(r.useRef)(),y=Object(r.useRef)(),T=Object(r.useRef)(),R=Object(r.useRef)(),C=Object(r.useRef)();function D(e){var n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"Prerna_2712",username:"prernagupta2712@gmail.com"}]});return n.onicecandidate=S,n.ontrack=P,n.onnegotiationneeded=function(){return function(e){y.current.createOffer().then((function(e){return y.current.setLocalDescription(e)})).then((function(){var n={target:e,caller:T.current.id,sdp:y.current.localDescription};T.current.emit("offer",n)})).catch((function(e){return console.log(e)}))}(e)},n}function N(e){y.current=D();var n=new RTCSessionDescription(e.sdp);y.current.setRemoteDescription(n).then((function(){C.current.getTracks().forEach((function(e){return y.current.addTrack(e,C.current)}))})).then((function(){return y.current.createAnswer()})).then((function(e){return y.current.setLocalDescription(e)})).then((function(){var n={target:e.caller,caller:T.current.id,sdp:y.current.localDescription};T.current.emit("answer",n)}))}function I(e){var n=new RTCSessionDescription(e.sdp);y.current.setRemoteDescription(n).catch((function(e){return console.log(e)}))}function S(e){if(e.candidate){var n={target:R.current,candidate:e.candidate};T.current.emit("ice-candidate",n)}}function x(e){var n=new RTCIceCandidate(e);y.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function P(e){w.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(n){v(n),g.current.srcObject=n,C.current=n,g.current.muted=!0,T.current=E.a.connect("/"),T.current.emit("join room",e.match.params.roomID),T.current.on("other user",(function(e){!function(e){y.current=D(e),C.current.getTracks().forEach((function(e){return y.current.addTrack(e,C.current)}))}(e),R.current=e})),T.current.on("user joined",(function(e){R.current=e})),T.current.on("offer",N),T.current.on("answer",I),T.current.on("ice-candidate",x)}))}),[]),p&&(n=c.a.createElement("div",{className:"my-video"},c.a.createElement(k,{playsInline:!0,muted:!0,ref:g,autoPlay:!0}))),t=c.a.createElement("div",{className:"friend-video"},c.a.createElement(k,{playsInline:!0,ref:w,autoPlay:!0})),c.a.createElement("div",null,c.a.createElement(O,null,n,t),c.a.createElement("footer",{className:"footer page-footer footer-copyright font-small fixed-bottom text-center py-3 special-color pt-4"},c.a.createElement("div",{className:"call-action"},c.a.createElement("button",{onClick:function(){i?(u(!1),g.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled}))):(u(!0),g.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled})))},className:i?"btn-mute":"btn-unmute"},c.a.createElement(j.a,{icon:i?"microphone-slash":"microphone"})),c.a.createElement("button",{className:f?"btn-video-on":"btn-video-off",onClick:function(){!f&&p?(m(!0),g.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),n=c.a.createElement("div",{className:"my-video"},c.a.createElement(k,{playsInline:!0,muted:i,ref:g,autoPlay:!0}))):f&&p&&(m(!1),g.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),n=c.a.createElement("div",{className:"my-video"},c.a.createElement(k,{playsInline:!0,muted:i,ref:g,autoPlay:!0})))}},c.a.createElement(j.a,{icon:f?"eye":"eye-slash"})),c.a.createElement("button",{className:"leave btn-circle",onClick:function(){T.current.destroy(),C.current.getVideoTracks()[0].enabled=!1,C.current.getAudioTracks()[0].enabled=!1,window.location.replace("/")}},c.a.createElement(j.a,{icon:"phone-slash"})))))};t(92);var y=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",exact:!0,component:s}),c.a.createElement(u.a,{path:"/room/:roomID",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.b5b2e618.chunk.js.map