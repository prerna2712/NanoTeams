(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t){},109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(52),o=n.n(a),i=(n(65),n(59)),u=n(4),l=n(113),s=n(53),d=n(54),m=n.n(d),f=(n(39),n(77),function(e){return c.a.createElement("header",{id:"home"},c.a.createElement(s.a,{type:"circle",bg:!0,color:"random"}),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"col"},c.a.createElement(m.a,{bottom:!0},c.a.createElement("h1",{className:"responsive-headline"},"Nano-Teams"),c.a.createElement("h3",null,"A video calling app. Create a room and share the link with your friend and connect realtime."),c.a.createElement("br",null),c.a.createElement("button",{className:"button",onClick:function(){var t=Object(l.a)();e.history.push("/room/".concat(t))}},"Create Room")))))}),b=n(25),h=n(32),p=n(11),v=n(13);p.b.add(v.c,v.d,v.a,v.e,v.b,v.f);var E,g,j=n(55),O=n.n(j),k=n(33),w=n(24),y=k.a.div(E||(E=Object(h.a)(["\n  position: fixed;\n  background: #000000;\n  width: 100vw;\n  height: 93vh;\n"]))),N=k.a.video(g||(g=Object(h.a)(["\n  border-radius: 10px;\n  width: 100%;\n  overflow: hidden;\n  background: #000000;\n"]))),T=function(e){var t,n,a=Object(r.useState)(!1),o=Object(b.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(!0),s=Object(b.a)(l,2),d=s[0],m=s[1],f=Object(r.useState)(),h=Object(b.a)(f,2),p=h[0],v=h[1],E=Object(r.useRef)(),g=Object(r.useRef)(),j=Object(r.useRef)(),k=Object(r.useRef)(),T=Object(r.useRef)(),C=Object(r.useRef)();function R(e){var t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]});return t.onicecandidate=S,t.ontrack=A,t.onnegotiationneeded=function(){return function(e){j.current.createOffer().then((function(e){return j.current.setLocalDescription(e)})).then((function(){var t={target:e,caller:k.current.id,sdp:j.current.localDescription};k.current.emit("offer",t)})).catch((function(e){return console.log(e)}))}(e)},t}function D(e){j.current=R();var t=new RTCSessionDescription(e.sdp);j.current.setRemoteDescription(t).then((function(){C.current.getTracks().forEach((function(e){return j.current.addTrack(e,C.current)}))})).then((function(){return j.current.createAnswer()})).then((function(e){return j.current.setLocalDescription(e)})).then((function(){var t={target:e.caller,caller:k.current.id,sdp:j.current.localDescription};k.current.emit("answer",t)}))}function I(e){var t=new RTCSessionDescription(e.sdp);j.current.setRemoteDescription(t).catch((function(e){return console.log(e)}))}function S(e){if(e.candidate){var t={target:T.current,candidate:e.candidate};k.current.emit("ice-candidate",t)}}function x(e){var t=new RTCIceCandidate(e);j.current.addIceCandidate(t).catch((function(e){return console.log(e)}))}function A(e){g.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(t){v(t),E.current.srcObject=t,C.current=t,E.current.muted=!0,k.current=O.a.connect("/"),k.current.emit("join room",e.match.params.roomID),k.current.on("other user",(function(e){!function(e){j.current=R(e),C.current.getTracks().forEach((function(e){return j.current.addTrack(e,C.current)}))}(e),T.current=e})),k.current.on("user joined",(function(e){T.current=e})),k.current.on("offer",D),k.current.on("answer",I),k.current.on("ice-candidate",x)}))}),[]),p&&(t=c.a.createElement("div",{className:"my-video"},c.a.createElement(N,{playsInline:!0,muted:!0,ref:E,autoPlay:!0}))),n=c.a.createElement("div",{className:"friend-video"},c.a.createElement(N,{playsInline:!0,ref:g,autoPlay:!0})),c.a.createElement("div",{className:"main"},c.a.createElement(y,null,t,n),c.a.createElement("footer",{className:"footer page-footer footer-copyright font-small fixed-bottom text-center py-3 special-color pt-4"},c.a.createElement("div",{className:"call-action"},c.a.createElement("button",{onClick:function(){i?(u(!1),E.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled}))):(u(!0),E.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled})))},className:i?"btn-mute":"btn-unmute"},c.a.createElement(w.a,{icon:i?"microphone-slash":"microphone"})),c.a.createElement("button",{className:d?"btn-video-on":"btn-video-off",onClick:function(){!d&&p?(m(!0),E.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),t=c.a.createElement("div",{className:"my-video"},c.a.createElement(N,{playsInline:!0,muted:i,ref:E,autoPlay:!0}))):d&&p&&(m(!1),E.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),t=c.a.createElement("div",{className:"my-video"},c.a.createElement(N,{playsInline:!0,muted:i,ref:E,autoPlay:!0})))}},c.a.createElement(w.a,{icon:d?"eye":"eye-slash"})),c.a.createElement("button",{className:"leave btn-circle",onClick:function(){k.current.destroy(),C.current.getVideoTracks()[0].enabled=!1,C.current.getAudioTracks()[0].enabled=!1,window.location.replace("/")}},c.a.createElement(w.a,{icon:"phone-slash"})))))};n(109);var C=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",exact:!0,component:f}),c.a.createElement(u.a,{path:"/room/:roomID",component:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){e.exports=n(111)},65:function(e,t,n){},77:function(e,t,n){}},[[60,1,2]]]);
//# sourceMappingURL=main.1d055411.chunk.js.map