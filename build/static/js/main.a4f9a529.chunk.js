(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t){},114:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(55),o=n.n(r),l=(n(69),n(63)),i=n(4),u=n(118),s=n(56),d=n(57),m=n.n(d),f=(n(42),n(81),function(e){return c.a.createElement("header",{id:"home"},c.a.createElement(s.a,{type:"circle",bg:!0,color:"random"}),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"col"},c.a.createElement(m.a,{bottom:!0},c.a.createElement("h1",{className:"responsive-headline"},"Nano-Teams"),c.a.createElement("h3",null,"A video calling app. Create a room and share the link with your friend and connect realtime."),c.a.createElement("br",null),c.a.createElement("button",{className:"button",onClick:function(){var t=Object(u.a)();e.history.push("/room/".concat(t))}},"Create Room")))))}),b=n(38),h=n(17),p=n(12),g=n(14),v=n(10);g.b.add(v.e,v.f,v.c,v.h,v.d,v.i,v.b,v.g,v.a);var E,j,O,k,w,y,x,N,C=n(58),T=n.n(C),R=n(13),D=n(16),I=n(59),S=n.n(I),A=R.a.div(E||(E=Object(p.a)(["\n  position: fixed;\n  background: #000000;\n  width: 100vw;\n  height: 93vh;\n"]))),B=R.a.video(j||(j=Object(p.a)(["\n  border-radius: 10px;\n  width: 100%;\n  overflow: hidden;\n  background: #000000;\n"]))),P=R.a.div(O||(O=Object(p.a)(["\n    // border: 1px solid black;\n    margin-top: 10px;\n"]))),V=R.a.textarea(k||(k=Object(p.a)(["\n    backgroud-color: white;\n    width: 20vw;\n    height: 100%;\n"]))),L=R.a.div(w||(w=Object(p.a)(["\n  background-color: #ADB5BD;\n  border-radius: 10px; \n  color: black;\n  border: 1px solid lightgray;\n  padding: 10px;\n  margin-right: 5px;\n  text-align: center;\n"]))),H=R.a.div(y||(y=Object(p.a)(["\n  backgroud-color: white;\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n  overflow: hidden;\n"]))),J=Object(R.a)(H)(x||(x=Object(p.a)(["\n  justify-content: flex-start;\n"]))),M=R.a.div(N||(N=Object(p.a)(["\n  background-color: black;\n  color: white;\n  border-radius: 10px; \n  border: 1px solid lightgray;\n  padding: 10px;\n  margin-left: 5px;\n  text-align: center;\n"]))),U=function(e){var t,n,r=Object(a.useState)(!1),o=Object(h.a)(r,2),l=o[0],i=o[1],u=Object(a.useState)(!0),s=Object(h.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(),p=Object(h.a)(f,2),g=p[0],v=p[1],E=Object(a.useState)(!1),j=Object(h.a)(E,2),O=j[0],k=j[1],w=Object(a.useState)(""),y=Object(h.a)(w,2),x=y[0],N=y[1],C=Object(a.useState)([]),R=Object(h.a)(C,2),I=R[0],U=R[1],W=Object(a.useRef)(),_=Object(a.useRef)(),$=Object(a.useRef)(),q=Object(a.useRef)(),z=Object(a.useRef)(),F=Object(a.useRef)(),G=Object(a.useRef)();function K(e){U((function(t){return[].concat(Object(b.a)(t),[{yours:!1,value:e.data}])}))}function Q(e){var t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]});return t.onicecandidate=X,t.ontrack=te,t.onnegotiationneeded=function(){return function(e){$.current.createOffer().then((function(e){return $.current.setLocalDescription(e)})).then((function(){var t={target:e,caller:q.current.id,sdp:$.current.localDescription};q.current.emit("offer",t)})).catch((function(e){return console.log(e)}))}(e)},t}function X(e){if(e.candidate){var t={target:z.current,candidate:e.candidate};q.current.emit("ice-candidate",t)}}function Y(e){var t=new RTCIceCandidate(e);$.current.addIceCandidate(t).catch((function(e){return console.log(e)}))}function Z(e){$.current=Q(),$.current.ondatachannel=function(e){G.current=e.channel,G.current.onmessage=K};var t=new RTCSessionDescription(e.sdp);$.current.setRemoteDescription(t).then((function(){F.current.getTracks().forEach((function(e){return $.current.addTrack(e,F.current)}))})).then((function(){return $.current.createAnswer()})).then((function(e){return $.current.setLocalDescription(e)})).then((function(){var t={target:e.caller,caller:q.current.id,sdp:$.current.localDescription};q.current.emit("answer",t)}))}function ee(e){var t=new RTCSessionDescription(e.sdp);$.current.setRemoteDescription(t).catch((function(e){return console.log(e)}))}function te(e){_.current.srcObject=e.streams[0]}return Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(t){v(t),W.current.srcObject=t,F.current=t,W.current.muted=!0,q.current=T.a.connect("/"),q.current.emit("join room",e.match.params.roomID),q.current.on("other user",(function(e){!function(e){$.current=Q(e),F.current.getTracks().forEach((function(e){return $.current.addTrack(e,F.current)})),G.current=$.current.createDataChannel("sendChannel"),G.current.onmessage=K}(e),z.current=e})),q.current.on("user joined",(function(e){z.current=e})),q.current.on("offer",Z),q.current.on("answer",ee),q.current.on("ice-candidate",Y)}))}),[]),g&&(t=c.a.createElement("div",{className:"my-video"},c.a.createElement(B,{playsInline:!0,muted:!0,ref:W,autoPlay:!0}))),n=c.a.createElement("div",{className:"friend-video"},c.a.createElement(B,{playsInline:!0,ref:_,autoPlay:!0})),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:O?"leftHide":"leftVis"},c.a.createElement(A,null,t,n),c.a.createElement("footer",{className:"footer page-footer footer-copyright font-small fixed-bottom text-center py-3 special-color pt-4"},c.a.createElement("div",{className:"call-action"},c.a.createElement("button",{className:"btn-circle",title:"copy URL",onClick:function(){S()(window.location.href)}},c.a.createElement(D.a,{icon:"clipboard"})),c.a.createElement("button",{onClick:function(){l?(i(!1),W.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled}))):(i(!0),W.current.srcObject.getAudioTracks().forEach((function(e){return e.enabled=!e.enabled})))},title:"audio",className:l?"btn-mute":"btn-unmute"},c.a.createElement(D.a,{icon:l?"microphone-slash":"microphone"})),c.a.createElement("button",{className:d?"btn-video-on":"btn-video-off",title:"video",onClick:function(){!d&&g?(m(!0),W.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),t=c.a.createElement("div",{className:"my-video"},c.a.createElement(B,{playsInline:!0,muted:l,ref:W,autoPlay:!0}))):d&&g&&(m(!1),W.current.srcObject.getVideoTracks().forEach((function(e){return e.enabled=!e.enabled})),t=c.a.createElement("div",{className:"my-video"},c.a.createElement(B,{playsInline:!0,muted:l,ref:W,autoPlay:!0})))}},c.a.createElement(D.a,{icon:d?"eye":"eye-slash"})),c.a.createElement("button",{title:"leave",className:"leave btn-circle",onClick:function(){q.current.destroy(),F.current.getVideoTracks()[0].enabled=!1,F.current.getAudioTracks()[0].enabled=!1,window.location.replace("/")}},c.a.createElement(D.a,{icon:"phone-slash"})),c.a.createElement("button",{title:"chat",onClick:function(){k(!O)},className:"btn-circle"},c.a.createElement(D.a,{icon:"comment-alt"}))))),c.a.createElement("div",{className:O?"chatVis":"chatHide"},c.a.createElement("div",{className:"main__header"},c.a.createElement("h6",null,"In-call messages")),c.a.createElement("div",{className:"chat-area"},c.a.createElement(P,null,I.map((function(e,t){if(""!=e.value)return e.yours?(window.scrollTo(0,5e3),c.a.createElement(H,{key:t},c.a.createElement(L,null,e.value))):c.a.createElement(J,{key:t},c.a.createElement(M,null,e.value))})))),c.a.createElement("div",{className:"text-area"},c.a.createElement("div",null,c.a.createElement(V,{className:"textBox",value:x,onChange:function(e){N(e.target.value)},placeholder:"Enter msg here..."}),c.a.createElement("button",{className:"send",onClick:function(e){G.current.send(x),U((function(e){return[].concat(Object(b.a)(e),[{yours:!0,value:x}])})),N("")}},c.a.createElement(D.a,{icon:"paper-plane"}))))))};n(114);var W=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(l.a,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",exact:!0,component:f}),c.a.createElement(i.a,{path:"/room/:roomID",component:U}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){e.exports=n(116)},69:function(e,t,n){},81:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.a4f9a529.chunk.js.map